overlay firmware

  7  8000-87FF  010000-010FFF  ROM 4K
  8  8800-BFFF  011000-017FFF  RAM firmware  (24 K)

011000-016a00  fixed part?
016a00-018000  overlay? size = 1600

long register has byte address, so use byte address.

tables

+00 word: addr, high byte first, always even (so byte offset?)
+02 word: flags, ffff = end of table


0000  header?
0080		sect=01
0880  table     sect=11
0a80            sect=15
1680  table
1880            sect=31
2080  table
2300            sect=46
2b00  table
2e00            sect=5c
3000  table
3080            sect=61
3680  table
3780            sect=6f
3b80  table
3c00            sect=78
4400  table
4500            sect=8a
4800  table
4900  table

# header:
+00-01 sector addr of code
+02    length in sectors?
+03    table sector offset?
+04    ??? load addr???
+05

0000  00 01 14 10 12 00;  #0
      00 15 1c 18 20 00;  #1
000c  00 31 15 10 1c 00;  #2
0012  00 46 16 10 20 00;  #3
      00 5c 05 04 24 00;  #4
001e  00 61 0e 0c 25 00;  #5
0024  00 6f 09 08 28 00;  #6
      00 78 12 10 2a 00;  #7
0030  00 8a 09 08 2d 00;  #8


9 overlays
   addr  len  reloc  
  000080 0a00 000880 
  000a80 0e00 001680 
  001880 0a80 002080 
  002300 0b00 002b00 
  002e00 0280 003000 
  003080 0700 003680 
  003780 0480 003b80 
  003c00 0900 004400 
  004500 0480 004900 


9 overlays
      fpos        rpos    size    rom-addr
  #0  000080 0a00 000880  000800
  #1  000a80 0e00 001680  000c00	  	 4 jumps: 0300, 03f0, 04e8,07ce
  #2  001880 0a80 002080  000800  003800	 3 jumps: 380a, 3828, 3f88
  #3  002300 0b00 002b00  000800  000000	18 jumps: 0028-0768
  #4  002e00 0280 003000  000200
  #5  003080 0700 003680  000600	       3+4 jumps: 0d3a,3572,0c22 + 0c30,0c552,0bda,0cae
  #6  003780 0480 003b80  000400  001000	7 jumps:  100e-13e0
  #7  003c00 0900 004400  000800
  #8  004500 0480 004900  000400


# relocation table:
+00-01 addr
+02-03 ??? fixup type, mask ???

00 00 ff ff = last entry

relocation on opcodes:

12 xx   mask ff
13 xx   mask ff
14 xx   mask 1f / ff
15 xx   mask ff

00000880  00 10 1f 00 00 1c 1f 00  00 34 1f 00 00 38 1f 00
00000890  00 46 1f 00 00 50 1f 00  00 60 1f 00 00 6a ff 00
000008a0  00 7e ff 00 00 80 ff 00  00 82 ff 00 00 84 ff 00
000008b0  00 86 ff 00 00 9a 1f 00  00 ae ff 00 00 b4 ff 00
000008c0  00 b8 ff 00 00 c0 1f 00  00 d2 1f 00 00 e2 1f 00
000008d0  01 4a 1f 00 01 4c 1f 00  01 4e 1f 00 01 50 1f 00
000008e0  01 52 1f 00 01 54 1f 00  01 56 1f 00 01 66 1f 00
000008f0  01 6e 1f 00 01 8a 1f 00  01 98 1f 00 01 9e 1f 00
00000900  01 a4 1f 00 01 ae 1f 00  01 b6 1f 00 01 ba 1f 00
00000910  01 c0 ff 00 01 c2 1f 00  01 c8 ff 00 01 ce 1f 00
00000920  01 d8 1f 00 01 ec 1f 00  01 f0 1f 00 01 fa 1f 00
00000930  02 00 00 01 02 04 1f 00  02 06 1f 00 02 08 1f 00
00000940  02 0a 1f 00 02 0c 1f 00  02 0e 1f 00 02 10 1f 00
00000950  02 12 1f 00 02 14 1f 00  02 16 1f 00 02 18 1f 00
00000960  02 1a 1f 00 02 1c 1f 00  02 20 1f 00 02 22 1f 00
00000970  02 24 1f 00 02 26 1f 00  02 28 1f 00 02 2a 1f 00
00000980  02 2c 1f 00 02 2e 1f 00  02 30 1f 00 02 32 1f 00
00000990  02 34 1f 00 02 36 1f 00  02 38 1f 00 02 3a 1f 00
000009a0  02 3c 1f 00 02 3e 1f 00  02 52 1f 00 02 56 1f 00
000009b0  02 8a 1f 00 02 90 1f 00  02 96 1f 00 02 a6 1f 00
000009c0  02 ac 1f 00 02 b6 1f 00  02 ba 1f 00 02 c0 1f 00
000009d0  03 06 1f 00 03 08 1f 00  03 0c 1f 00 03 12 1f 00
000009e0  03 2a 1f 00 03 56 1f 00  03 76 1f 00 03 84 1f 00
000009f0  03 92 1f 00 03 ea 1f 00  03 ee 1f 00 03 f8 1f 00
00000a00  04 14 1f 00 04 20 ff 00  04 28 ff 00 04 2a 1f 00
00000a10  05 54 1f 00 05 5c 1f 00  05 b6 1f 00 06 02 1f 00
00000a20  06 18 1f 00 06 24 1f 00  06 34 1f 00 06 40 1f 00
00000a30  06 56 1f 00 06 64 1f 00  06 7c 1f 00 06 82 1f 00
00000a40  06 8a 1f 00 06 aa 1f 00  06 cc 1f 00 07 68 1f 00
00000a50  07 80 1f 00 07 86 1f 00  07 8a 1f 00 07 8e 1f 00
00000a60  07 9c 1f 00 07 c8 1f 00  07 f6 1f 00 00 00 ff ff
00000a70  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00

00001670  32 f0 00 00 00 00 00 00  00 00 00 00 00 00 00 00
00001680  00 00 1f 00 00 02 1f 00  00 04 1f 00 00 06 1f 00
00001690  00 0e 1f 00 00 18 1f 00  00 3a 1f 00 00 44 1f 00
000016a0  00 56 1f 00 00 62 1f 00  00 a0 1f 00 00 c4 1f 00
000016b0  00 ce 1f 00 00 d1 ff 00  01 06 1f 00 01 0d ff 00
000016c0  01 3e 1f 00 01 5c ff 00  01 6e 1f 00 01 8f ff 00
000016d0  01 98 1f 00 01 c0 1f 00  01 c8 1f 00 01 ca 1f 00
000016e0  01 cc 1f 00 01 ce 1f 00  03 55 ff 00 01 fe 1f 00
000016f0  01 e6 1f 00 01 e4 1f 00  03 0a ff 00 03 32 ff 00
00001700  03 46 1f 00 03 76 1f 00  03 7a 1f 00 03 80 1f 00
00001710  03 8a 1f 00 03 8c 1f 00  03 8e 1f 00 03 96 ff 00
00001720  03 c0 1f 00 03 c4 1f 00  03 e4 1f 00 03 ee 1f 00
00001730  03 f4 1f 00 04 02 ff 00  04 04 ff 00 04 06 ff 00
00001740  04 08 ff 00 04 8c ff 00  04 9c 1f 00 04 b2 1f 00
00001750  04 bc ff 00 04 de ff 00  04 e2 ff 00 04 e4 1f 00
00001760  04 e6 1f 00 05 fe 1f 00  05 18 1f 00 05 34 ff 00
00001770  05 3f ff 00 05 6c 1f 00  05 76 1f 00 05 8e ff 00
00001780  05 b0 1f 00 05 b4 1f 00  05 c4 1f 00 05 ca ff 00
00001790  05 f4 1f 00 05 f6 1f 00  06 00 ff 00 06 02 ff 00
000017a0  06 04 ff 00 06 06 ff 00  06 08 ff 00 06 0a ff 00
000017b0  06 0c ff 00 06 0e ff 00  06 10 ff 00 06 12 ff 00
000017c0  06 14 ff 00 06 16 ff 00  06 18 ff 00 06 1a ff 00
000017d0  06 1c ff 00 06 1e ff 00  06 38 1f 00 06 5e 1f 00
000017e0  06 b2 1f 00 06 c0 1f 00  06 ee 1f 00 07 08 ff 00
000017f0  07 4e 1f 00 07 54 1f 00  07 86 1f 00 07 8c 1f 00
00001800  07 92 1f 00 07 aa 1f 00  07 cc 1f 00 07 e6 1f 00
00001810  07 f2 1f 00 08 22 1f 00  08 26 ff 00 08 62 1f 00
00001820  08 6c 1f 00 08 7e 1f 00  08 8c 1f 00 08 9a ff 00
00001830  08 9e ff 00 08 a4 ff 00  08 b8 ff 00 08 bc ff 00
00001840  08 d6 1f 00 08 da 1f 00  08 de 1f 00 08 e2 1f 00
00001850  08 ec 1f 00 0b 54 ff 00  0b 74 1f 00 0b 76 1f 00
00001860  0b a0 1f 00 0b b6 1f 00  0b b8 1f 00 0b c2 1f 00
00001870  0b c8 1f 00 00 10 00 01  00 00 ff ff 00 00 00 00

00002080  00 00 00 01 00 04 1f 00  00 06 1f 00 00 08 1f 00
00002090  00 32 ff 00 00 3a ff 00  00 3c 1f 00 00 80 1f 00
000020a0  00 8c 1f 00 00 92 1f 00  00 98 1f 00 00 9c 1f 00
000020b0  00 a6 1f 00 00 aa 1f 00  00 b2 1f 00 00 b6 1f 00
000020c0  00 bc 1f 00 00 c0 1f 00  00 c6 1f 00 00 d2 1f 00
000020d0  00 d6 1f 00 00 da 1f 00  00 de 1f 00 00 e4 1f 00
000020e0  00 ee 1f 00 00 f2 1f 00  00 f8 1f 00 00 fc 1f 00
000020f0  01 06 1f 00 01 0a 1f 00  01 0e 1f 00 01 14 1f 00
00002100  01 1c 1f 00 01 26 1f 00  01 3a ff 00 01 3c 1f 00
00002110  01 50 1f 00 01 58 1f 00  01 74 1f 00 01 8a 1f 00
00002120  01 8e 1f 00 01 94 1f 00  01 9c 1f 00 01 a2 1f 00
00002130  01 aa 1f 00 01 b2 1f 00  01 c0 1f 00 01 cc ff 00
00002140  01 ce 1f 00 02 02 1f 00  02 1e 1f 00 02 26 1f 00
00002150  02 2a 1f 00 02 40 1f 00  02 42 1f 00 02 44 1f 00
00002160  02 46 1f 00 02 48 1f 00  02 4a 1f 00 02 4c 1f 00
00002170  02 4e 1f 00 02 52 1f 00  02 58 1f 00 02 5c 1f 00
00002180  02 72 1f 00 02 7e 1f 00  02 80 1f 00 02 82 1f 00
00002190  02 84 1f 00 02 86 1f 00  02 88 1f 00 02 8a 1f 00
000021a0  02 8c 1f 00 02 94 1f 00  02 96 1f 00 02 98 1f 00
000021b0  02 9a 1f 00 02 ae 1f 00  02 b0 1f 00 02 b2 1f 00
000021c0  02 b4 1f 00 02 b6 1f 00  02 b8 1f 00 02 ba 1f 00
000021d0  02 bc 1f 00 02 d2 1f 00  02 d8 1f 00 02 f2 1f 00
000021e0  02 f8 1f 00 03 04 1f 00  03 1c 1f 00 03 2a 1f 00
000021f0  03 42 1f 00 03 5e 1f 00  03 78 1f 00 03 90 1f 00
00002200  03 ac 1f 00 03 c6 1f 00  03 da 1f 00 03 f2 1f 00
00002210  03 f8 1f 00 03 fc 1f 00  04 10 ff 00 04 12 1f 00
00002220  04 1e 1f 00 04 22 ff 00  04 24 1f 00 04 30 1f 00
00002230  04 3e 1f 00 04 46 1f 00  04 4c 1f 00 04 56 1f 00
00002240  04 5a 1f 00 04 60 1f 00  04 6e 1f 00 04 72 1f 00
00002250  04 7c 1f 00 04 84 ff 00  04 88 1f 00 04 ce 1f 00
00002260  04 e0 1f 00 05 00 1f 00  05 0e 1f 00 05 2c 1f 00
00002270  05 4a 1f 00 05 58 1f 00  05 6a 1f 00 05 76 1f 00
00002280  05 7a 1f 00 05 b4 1f 00  05 c2 1f 00 05 d4 1f 00
00002290  05 e0 1f 00 05 e4 1f 00  05 fc 1f 00 06 14 1f 00
000022a0  06 3c 1f 00 06 8a 1f 00  06 be 1f 00 06 d8 1f 00
000022b0  06 e4 1f 00 06 e8 1f 00  06 ee 1f 00 07 30 1f 00
000022c0  07 52 1f 00 07 68 1f 00  07 7a 1f 00 07 b0 1f 00
000022d0  07 d0 1f 00 07 f8 1f 00  00 00 ff ff 00 00 00 00
000022e0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
*

00002b00  00 00 00 01 00 04 1f 00  00 06 1f 00 00 08 1f 00
00002b10  00 0a 1f 00 00 0c 1f 00  00 0e 1f 00 00 10 1f 00
00002b20  00 12 1f 00 00 14 1f 00  00 16 1f 00 00 18 1f 00
00002b30  00 1a 1f 00 00 1c 1f 00  00 1e 1f 00 00 20 1f 00
00002b40  00 22 1f 00 00 24 1f 00  00 26 1f 00 00 50 ff 00
00002b50  00 58 ff 00 00 5a 1f 00  00 9e 1f 00 00 aa 1f 00
00002b60  00 b0 1f 00 00 b6 1f 00  00 ba 1f 00 00 c4 1f 00
00002b70  00 c8 1f 00 00 d0 1f 00  00 d4 1f 00 00 da 1f 00
00002b80  00 de 1f 00 00 e4 1f 00  00 f0 1f 00 00 f4 1f 00
00002b90  00 f8 1f 00 00 fc 1f 00  01 02 1f 00 01 0c 1f 00
00002ba0  01 10 1f 00 01 16 1f 00  01 1a 1f 00 01 24 1f 00
00002bb0  01 28 1f 00 01 2c 1f 00  01 32 1f 00 01 3a 1f 00
00002bc0  01 44 1f 00 01 58 ff 00  01 5a 1f 00 01 6e 1f 00
00002bd0  01 76 1f 00 01 92 1f 00  01 a8 1f 00 01 ac 1f 00
00002be0  01 b2 1f 00 01 ba 1f 00  01 c0 1f 00 01 c8 1f 00
00002bf0  01 d0 1f 00 01 de 1f 00  01 ea ff 00 01 ec 1f 00
00002c00  02 20 1f 00 02 2c 1f 00  02 34 1f 00 02 38 1f 00
00002c10  02 4a 1f 00 02 4c 1f 00  02 4e 1f 00 02 50 1f 00
00002c20  02 52 1f 00 02 54 1f 00  02 56 1f 00 02 58 1f 00
00002c30  02 5c 1f 00 02 62 1f 00  02 66 1f 00 02 76 1f 00
00002c40  02 82 1f 00 02 84 1f 00  02 86 1f 00 02 88 1f 00
00002c50  02 8a 1f 00 02 8c 1f 00  02 8e 1f 00 02 90 1f 00
00002c60  02 98 1f 00 02 9a 1f 00  02 9c 1f 00 02 9e 1f 00
00002c70  02 ae 1f 00 02 b0 1f 00  02 b2 1f 00 02 b4 1f 00
00002c80  02 b6 1f 00 02 b8 1f 00  02 ba 1f 00 02 bc 1f 00
00002c90  02 cc 1f 00 02 e0 1f 00  02 ee 1f 00 02 f2 1f 00
00002ca0  03 04 1f 00 03 10 1f 00  03 14 1f 00 03 26 1f 00
00002cb0  03 3c 1f 00 03 50 ff 00  03 52 1f 00 03 5e 1f 00
00002cc0  03 62 ff 00 03 64 1f 00  03 70 1f 00 03 82 1f 00
00002cd0  03 8a 1f 00 03 90 1f 00  03 9a 1f 00 03 9e 1f 00
00002ce0  03 a4 1f 00 03 b2 1f 00  03 b6 1f 00 03 c0 1f 00
00002cf0  03 c8 ff 00 03 cc 1f 00  03 d8 1f 00 03 f0 1f 00
00002d00  04 18 1f 00 04 2a 1f 00  04 4c 1f 00 04 62 1f 00
00002d10  04 74 1f 00 04 aa 1f 00  04 ca 1f 00 04 f2 1f 00
00002d20  05 82 1f 00 05 9e 1f 00  05 ac ff 00 05 b4 ff 00
00002d30  05 d8 ff 00 05 de ff 00  05 e8 1f 00 05 ec ff 00
00002d40  05 f0 1f 00 06 2e 1f 00  06 46 1f 00 06 60 1f 00
00002d50  06 64 ff 00 06 7a ff 00  06 be ff 00 06 c6 1f 00
00002d60  06 ca 1f 00 06 ce ff 00  06 d6 1f 00 06 da 1f 00
00002d70  06 fe 1f 00 07 02 ff 00  07 0a 1f 00 07 0e ff 00
00002d80  07 1a 1f 00 07 1e ff 00  07 26 1f 00 07 2a ff 00
00002d90  07 36 1f 00 07 3a ff 00  07 3e 1f 00 07 42 ff 00
00002da0  07 4a 1f 00 07 54 1f 00  07 60 1f 00 07 66 1f 00
00002db0  07 6a 1f 00 00 00 ff ff  00 00 00 00 00 00 00 00
00002dc0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
*

00003670  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00
00003680  00 00 00 01 00 04 1f 00  00 06 1f 00 00 08 1f 00
00003690  00 0e 1f 00 00 10 1f 00  00 12 1f 00 00 14 1f 00
000036a0  01 e6 1f 00 02 00 ff 00  02 02 ff 00 02 04 ff 00
000036b0  02 06 ff 00 02 08 ff 00  02 0a ff 00 02 0c ff 00
000036c0  02 0e ff 00 02 10 ff 00  02 12 ff 00 02 14 ff 00
000036d0  02 16 ff 00 02 18 ff 00  02 1a ff 00 02 1c ff 00
000036e0  02 1e ff 00 02 20 ff 00  02 25 ff 00 02 32 1f 00
000036f0  02 3c 1f 00 02 3e 1f 00  02 42 1f 00 02 4c 1f 00
00003700  02 54 1f 00 02 60 1f 00  02 6a 1f 00 02 74 1f 00
00003710  02 a0 1f 00 02 b0 1f 00  02 b4 ff 00 02 c2 1f 00
00003720  02 c6 ff 00 02 e4 1f 00  03 08 1f 00 03 30 1f 00
00003730  03 54 1f 00 03 60 1f 00  03 7c 1f 00 03 8a 1f 00
00003740  03 d4 1f 00 00 00 ff ff  00 00 00 00 00 00 00 00
00003750  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00

========================================

pf ewbbbb start_sct len_sct tab_sct unk unk

Cf 0x80 10ewebbbb start_sct len_sct tab_sct unk unk @ 0x0

Cf 6 ewebbbb start_sct len_sct tab_sct unk unk @ 0*6+0x0
Cf 6 ewebbbb start_sct len_sct tab_sct unk unk @ 1*6+0x0
Cf 6 ewebbbb start_sct len_sct tab_sct unk unk @ 2*6+0x0
Cf 6 ewebbbb start_sct len_sct tab_sct unk unk @ 3*6+0x0
Cf 6 ewebbbb start_sct len_sct tab_sct unk unk @ 4*6+0x0
Cf 6 ewebbbb start_sct len_sct tab_sct unk unk @ 5*6+0x0
Cf 6 ewebbbb start_sct len_sct tab_sct unk unk @ 6*6+0x0
Cf 6 ewebbbb start_sct len_sct tab_sct unk unk @ 7*6+0x0
Cf 6 ewebbbb start_sct len_sct tab_sct unk unk @ 8*6+0x0
Ch 0x80-0x36 @ 0x36
CC "Overlay 1" @ 0x80


pd 0x2800 ~ ??7_
